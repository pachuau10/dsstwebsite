{% extends 'main/base.html' %}
{% block title %}Achievements ‚Äì DSST{% endblock %}
{% block og_title %}Achievements ‚Äì DSST{% endblock %}
{% block og_description %}Celebrating the academic, sports, and cultural achievements of DSST students and faculty.{% endblock %}

{% block extra_css %}
<style>
    .ach-card { border-radius: 14px; overflow: hidden; transition: all 0.3s; }
    .ach-card:hover { transform: translateY(-5px); box-shadow: 0 18px 45px rgba(0,0,0,0.12) !important; }
    .level-national { border-top: 4px solid #ffd700 !important; }
    .level-international { border-top: 4px solid #ff6b35 !important; }
    .level-state { border-top: 4px solid #17a2b8 !important; }
    .level-district { border-top: 4px solid #28a745 !important; }
    .stat-card { border-radius: 16px; padding: 25px; text-align: center; color: white; }
    .filter-row select { border-radius: 10px; border: 2px solid #e0e0e0; padding: 8px 12px; font-size: 0.88rem; }
    .filter-row select:focus { border-color: var(--primary); outline: none; box-shadow: none; }
    .cat-icon { font-size: 2rem; margin-bottom: 8px; }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <nav aria-label="breadcrumb"><ol class="breadcrumb mb-2" style="--bs-breadcrumb-divider-color:rgba(255,255,255,0.5);"><li class="breadcrumb-item"><a href="/" style="color:rgba(255,255,255,0.7);">Home</a></li><li class="breadcrumb-item active text-white">Achievements</li></ol></nav>
        <h1 style="font-family:'Playfair Display',serif;" class="mb-1">üèÜ Achievements & Awards</h1>
        <p style="color:rgba(255,255,255,0.8);">Celebrating excellence ‚Äì our students and school shining on every stage.</p>
    </div>
</div>

<!-- Stats Bar -->
<div style="background:var(--primary);padding:30px 0;">
    <div class="container">
        <div class="row g-3 text-center text-white">
            <div class="col-6 col-md-3"><div style="font-size:2.2rem;font-weight:700;color:#f5c842;">{{ counts.total }}+</div><div style="color:rgba(255,255,255,0.8);font-size:0.88rem;">Total Awards</div></div>
            <div class="col-6 col-md-3"><div style="font-size:2.2rem;font-weight:700;color:#f5c842;">{{ counts.national }}+</div><div style="color:rgba(255,255,255,0.8);font-size:0.88rem;">National/International</div></div>
            <div class="col-6 col-md-3"><div style="font-size:2.2rem;font-weight:700;color:#f5c842;">{{ counts.sports }}+</div><div style="color:rgba(255,255,255,0.8);font-size:0.88rem;">Sports Trophies</div></div>
            <div class="col-6 col-md-3"><div style="font-size:2.2rem;font-weight:700;color:#f5c842;">{{ counts.academic }}+</div><div style="color:rgba(255,255,255,0.8);font-size:0.88rem;">Academic Awards</div></div>
        </div>
    </div>
</div>

<section class="section-py bg-light-custom">
    <div class="container">
        <!-- Filters -->
        <div class="card p-4 mb-5">
            <form method="get" class="row g-3 filter-row align-items-end">
                <div class="col-md-4">
                    <label class="form-label fw-600" style="font-size:0.85rem;">Category</label>
                    <select name="cat" class="form-select" onchange="this.form.submit()">
                        <option value="">All Categories</option>
                        {% for val, label in categories %}<option value="{{ val }}" {% if selected_cat == val %}selected{% endif %}>{{ label }}</option>{% endfor %}
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label fw-600" style="font-size:0.85rem;">Level</label>
                    <select name="level" class="form-select" onchange="this.form.submit()">
                        <option value="">All Levels</option>
                        {% for val, label in levels %}<option value="{{ val }}" {% if selected_level == val %}selected{% endif %}>{{ label }}</option>{% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-600" style="font-size:0.85rem;">Year</label>
                    <select name="year" class="form-select" onchange="this.form.submit()">
                        <option value="">All Years</option>
                        {% for yr in years %}<option value="{{ yr }}" {% if selected_year == yr|stringformat:'s' %}selected{% endif %}>{{ yr }}</option>{% endfor %}
                    </select>
                </div>
                <div class="col-md-1"><a href="/achievements/" class="btn btn-outline-secondary w-100">‚úï</a></div>
            </form>
        </div>

        {% if achievements %}
        <div class="row g-4">
            {% for ach in achievements %}
            <div class="col-md-6 col-lg-4">
                <div class="card ach-card h-100 level-{{ ach.level }}">
                    {% if ach.image %}
                    <div style="height:160px;overflow:hidden;"><img src="{{ ach.image.url }}" style="width:100%;height:100%;object-fit:cover;" alt="{{ ach.title }}"></div>
                    {% else %}
                    <div style="height:120px;background:{% if ach.level == 'national' or ach.level == 'international' %}linear-gradient(135deg,#f57f17,#fbc02d){% elif ach.level == 'state' %}linear-gradient(135deg,#0277bd,#0288d1){% else %}linear-gradient(135deg,#2e7d32,#388e3c){% endif %};display:flex;align-items:center;justify-content:center;color:white;flex-direction:column;">
                        <div style="font-size:2.5rem;">{% if ach.category == 'sports' %}üèÖ{% elif ach.category == 'academic' %}üìö{% elif ach.category == 'arts' %}üé≠{% elif ach.category == 'science' %}üî¨{% else %}üèÜ{% endif %}</div>
                    </div>
                    {% endif %}
                    <div class="card-body p-4">
                        <div class="d-flex gap-2 mb-3 flex-wrap">
                            <span class="badge {% if ach.level == 'national' or ach.level == 'international' %}bg-warning text-dark{% elif ach.level == 'state' %}bg-info{% else %}bg-success{% endif %}" style="font-size:0.72rem;">{{ ach.get_level_display }}</span>
                            <span class="badge bg-light text-dark" style="font-size:0.72rem;">{{ ach.get_category_display }}</span>
                            <span class="badge bg-secondary" style="font-size:0.72rem;">{{ ach.year }}</span>
                        </div>
                        <h6 class="fw-700 mb-2" style="color:var(--primary);">{{ ach.title }}</h6>
                        <p style="font-size:0.84rem;color:#666;line-height:1.7;margin-bottom:10px;">{{ ach.description|truncatechars:150 }}</p>
                        {% if ach.winner_name %}
                        <div style="font-size:0.8rem;" class="mt-auto pt-2 border-top">
                            <i class="fas fa-user-graduate me-1 text-primary"></i><strong>{{ ach.winner_name }}</strong>
                            {% if ach.winner_class %}<span class="text-muted"> ‚Äì {{ ach.winner_class }}</span>{% endif %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-5"><i class="fas fa-trophy fa-3x text-muted mb-3 d-block"></i><h5 class="text-muted">No achievements found</h5><a href="/achievements/" class="btn btn-outline-primary mt-2 rounded-pill">View All</a></div>
        {% endif %}
    </div>
</section>
{% endblock %}
