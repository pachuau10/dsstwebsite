{% extends 'main/base.html' %}

{% block title %}Pay School Fee ‚Äì DSST{% endblock %}

{% block extra_css %}
<style>
    .fee-card { background:white; border-radius:20px; box-shadow:0 10px 40px rgba(0,0,0,0.08); overflow:hidden; }
    .fee-header { background:linear-gradient(135deg,#1a3a6e,#1565c0); color:white; padding:30px; }
    .fee-type-option { border:2px solid #e0e0e0; border-radius:12px; padding:16px; cursor:pointer; transition:all 0.3s; text-align:center; }
    .fee-type-option:hover { border-color:#1a3a6e; background:#f0f4ff; }
    .fee-type-option.selected { border-color:#1a3a6e; background:#e8f0fe; }
    .fee-type-option .icon { font-size:1.8rem; margin-bottom:8px; }
    .fee-type-option .name { font-size:0.85rem; font-weight:600; color:#1a3a6e; }
    .fee-type-option .amount { font-size:1.1rem; font-weight:700; color:#e8a020; }

    .form-floating label { font-size:0.9rem; }
    .form-control, .form-select { border-radius:10px; border:2px solid #e0e0e0; transition: border-color 0.3s; }
    .form-control:focus, .form-select:focus { border-color:#1a3a6e; box-shadow:none; }

    .payment-method-card { border:2px solid #e0e0e0; border-radius:12px; padding:16px; cursor:pointer; transition:all 0.3s; display:flex; align-items:center; gap:12px; }
    .payment-method-card:hover, .payment-method-card.selected { border-color:#1a3a6e; background:#f0f4ff; }
    .payment-method-card input[type=radio] { display:none; }

    .summary-box { background:#f8f9fc; border-radius:16px; padding:25px; position:sticky; top:100px; }
    .summary-row { display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px dashed #ddd; font-size:0.9rem; }
    .summary-row:last-child { border:none; font-weight:700; font-size:1rem; color:#1a3a6e; }

    .step-indicator { display:flex; gap:0; margin-bottom:30px; }
    .step { flex:1; text-align:center; position:relative; }
    .step::after { content:''; position:absolute; top:15px; left:50%; width:100%; height:2px; background:#ddd; z-index:0; }
    .step:last-child::after { display:none; }
    .step-circle { width:32px; height:32px; border-radius:50%; background:#ddd; color:#999; display:flex; align-items:center; justify-content:center; font-size:0.85rem; font-weight:700; margin:0 auto 8px; position:relative; z-index:1; }
    .step.active .step-circle { background:#1a3a6e; color:white; }
    .step.done .step-circle { background:#28a745; color:white; }
    .step-label { font-size:0.75rem; color:#999; }
    .step.active .step-label { color:#1a3a6e; font-weight:600; }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-2" style="--bs-breadcrumb-divider-color:rgba(255,255,255,0.5);">
                <li class="breadcrumb-item"><a href="/" style="color:rgba(255,255,255,0.7);">Home</a></li>
                <li class="breadcrumb-item active text-white">Fee Payment</li>
            </ol>
        </nav>
        <h1 style="font-family:'Playfair Display',serif;" class="mb-1">üí≥ Online Fee Payment</h1>
        <p style="color:rgba(255,255,255,0.8);">Quick, secure, and hassle-free fee payment portal.</p>
    </div>
</div>

<section style="padding:60px 0; background:#f8f9fc;">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-8">
                <div class="fee-card">
                    <div class="fee-header">
                        <h4 class="mb-0"><i class="fas fa-university me-2"></i>DSST ‚Äì Fee Portal</h4>
                        <p class="mb-0 mt-1" style="color:rgba(255,255,255,0.7); font-size:0.9rem;">All transactions are 100% secure and encrypted.</p>
                    </div>
                    <div class="p-4 p-md-5">
                        <form method="post" id="feeForm">
                            {% csrf_token %}

                            <!-- Section 1: Student Info -->
                            <h5 class="fw-700 mb-4" style="color:#1a3a6e; border-bottom:2px solid #e0e0e0; padding-bottom:12px;">
                                <i class="fas fa-user-graduate me-2"></i>Student Information
                            </h5>
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" name="student_name" class="form-control" id="studentName" placeholder=" " required>
                                        <label for="studentName">Student Full Name *</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" name="student_id" class="form-control" id="studentId" placeholder=" " required>
                                        <label for="studentId">Student ID / Admission No. *</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select name="class_name" class="form-select" id="className" required>
    <option value="" disabled selected>Select Class</option>
    <option>Class 11</option>
    <option>Class 12</option>
</select>
                                        <label for="className">Class *</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select name="section" class="form-select" id="section">
                                            <option value="">Not Applicable</option>
                                            <option>A</option><option>B</option><option>C</option><option>D</option><option>E</option>
                                        </select>
                                        <label for="section">Section</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Section 2: Fee Type -->
                            <h5 class="fw-700 mb-4" style="color:#1a3a6e; border-bottom:2px solid #e0e0e0; padding-bottom:12px;">
                                <i class="fas fa-receipt me-2"></i>Select Fee Type
                            </h5>
                            <input type="hidden" name="fee_type" id="feeTypeInput" required>
                            <input type="hidden" name="amount" id="amountInput">
                            <div class="row g-3 mb-4" id="feeTypeGrid">
                                <div class="col-6 col-md-4">
                                    <div class="fee-type-option" onclick="selectFeeType(this,'tuition','‚Çπ3,000','3000')">
                                        <div class="icon">üìö</div>
                                        <div class="name">Tuition Fee</div>
                                        <div class="amount">‚Çπ3,000</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="fee-type-option" onclick="selectFeeType(this,'exam','‚Çπ500','500')">
                                        <div class="icon">üìù</div>
                                        <div class="name">Exam Fee</div>
                                        <div class="amount">‚Çπ500</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="fee-type-option" onclick="selectFeeType(this,'library','‚Çπ200','200')">
                                        <div class="icon">üìñ</div>
                                        <div class="name">Library Fee</div>
                                        <div class="amount">‚Çπ200</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="fee-type-option" onclick="selectFeeType(this,'sports','‚Çπ300','300')">
                                        <div class="icon">‚öΩ</div>
                                        <div class="name">Sports Fee</div>
                                        <div class="amount">‚Çπ300</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="fee-type-option" onclick="selectFeeType(this,'transport','‚Çπ1,500','1500')">
                                        <div class="icon">üöå</div>
                                        <div class="name">Transport Fee</div>
                                        <div class="amount">‚Çπ1,500</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="fee-type-option" onclick="selectFeeType(this,'misc','‚Çπ100','100')">
                                        <div class="icon">üìã</div>
                                        <div class="name">Miscellaneous</div>
                                        <div class="amount">‚Çπ100</div>
                                    </div>
                                </div>
                            </div>

                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select name="month" class="form-select" id="month">
                                            <option value="">Not Applicable</option>
                                            <option>April 2024</option><option>May 2024</option><option>June 2024</option>
                                            <option>July 2024</option><option>August 2024</option><option>September 2024</option>
                                            <option>October 2024</option><option>November 2024</option><option>December 2024</option>
                                            <option>January 2025</option><option>February 2025</option><option>March 2025</option>
                                        </select>
                                        <label for="month">Fee Month</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Section 3: Contact -->
                            <h5 class="fw-700 mb-4" style="color:#1a3a6e; border-bottom:2px solid #e0e0e0; padding-bottom:12px;">
                                <i class="fas fa-envelope me-2"></i>Contact Details
                            </h5>
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="email" name="email" class="form-control" id="email" placeholder=" " required>
                                        <label for="email">Email Address *</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="tel" name="phone" class="form-control" id="phone" placeholder=" " required>
                                        <label for="phone">Phone Number *</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Section 4: Payment Method -->
                            <h5 class="fw-700 mb-4" style="color:#1a3a6e; border-bottom:2px solid #e0e0e0; padding-bottom:12px;">
                                <i class="fas fa-credit-card me-2"></i>Payment Method
                            </h5>
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <label class="payment-method-card selected" id="pm-upi">
                                        <input type="radio" name="payment_method" value="upi" checked onchange="selectPayment('pm-upi')">
                                        <span style="font-size:1.5rem;">üì±</span>
                                        <div>
                                            <div class="fw-600">UPI / QR Code</div>
                                            <div style="font-size:0.8rem; color:#888;">GPay, PhonePe, Paytm</div>
                                        </div>
                                    </label>
                                </div>
                                <div class="col-md-6">
                                    <label class="payment-method-card" id="pm-netbanking">
                                        <input type="radio" name="payment_method" value="netbanking" onchange="selectPayment('pm-netbanking')">
                                        <span style="font-size:1.5rem;">üè¶</span>
                                        <div>
                                            <div class="fw-600">Net Banking</div>
                                            <div style="font-size:0.8rem; color:#888;">All major banks supported</div>
                                        </div>
                                    </label>
                                </div>
                                <div class="col-md-6">
                                    <label class="payment-method-card" id="pm-card">
                                        <input type="radio" name="payment_method" value="card" onchange="selectPayment('pm-card')">
                                        <span style="font-size:1.5rem;">üí≥</span>
                                        <div>
                                            <div class="fw-600">Debit / Credit Card</div>
                                            <div style="font-size:0.8rem; color:#888;">Visa, Mastercard, RuPay</div>
                                        </div>
                                    </label>
                                </div>
                                <div class="col-md-6">
                                    <label class="payment-method-card" id="pm-cash">
                                        <input type="radio" name="payment_method" value="cash" onchange="selectPayment('pm-cash')">
                                        <span style="font-size:1.5rem;">üíµ</span>
                                        <div>
                                            <div class="fw-600">Cash at School</div>
                                            <div style="font-size:0.8rem; color:#888;">Visit the accounts office</div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label fw-600">Remarks (Optional)</label>
                                <textarea name="remarks" class="form-control" rows="2" placeholder="Any special instructions..."></textarea>
                            </div>

                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="terms" required>
                                <label class="form-check-label" for="terms" style="font-size:0.9rem;">
                                    I confirm that all the details entered are correct and agree to the <a href="#">Terms & Conditions</a>.
                                </label>
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg w-100 rounded-pill fw-600" style="padding:15px; font-size:1.1rem;">
                                <i class="fas fa-lock me-2"></i>Pay Securely Now
                            </button>
                            <p class="text-center mt-3" style="font-size:0.8rem; color:#999;">
                                <i class="fas fa-shield-alt me-1 text-success"></i>256-bit SSL encrypted. Your payment is safe.
                            </p>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Summary Sidebar -->
            <div class="col-lg-4">
                <div class="summary-box">
                    <h5 class="fw-700 mb-4" style="color:#1a3a6e;"><i class="fas fa-receipt me-2"></i>Payment Summary</h5>
                    <div class="summary-row"><span>Student Name</span><span id="s-name" style="color:#666;">‚Äì</span></div>
                    <div class="summary-row"><span>Student ID</span><span id="s-id" style="color:#666;">‚Äì</span></div>
                    <div class="summary-row"><span>Class</span><span id="s-class" style="color:#666;">‚Äì</span></div>
                    <div class="summary-row"><span>Fee Type</span><span id="s-type" style="color:#666;">‚Äì</span></div>
                    <div class="summary-row"><span>Month</span><span id="s-month" style="color:#666;">‚Äì</span></div>
                    <div class="summary-row"><span>üí∞ Total Amount</span><span id="s-amount" style="color:#e8a020;">‚Çπ0</span></div>

                    <div class="mt-4 p-3 rounded-3" style="background:#e8f5e9;">
                        <div class="d-flex align-items-center gap-2 mb-1">
                            <i class="fas fa-check-circle text-success"></i>
                            <span style="font-size:0.85rem; font-weight:600;">Instant Receipt</span>
                        </div>
                        <p style="font-size:0.8rem; color:#555; margin:0;">You'll receive a payment receipt instantly after successful payment.</p>
                    </div>

                    <div class="mt-3 p-3 rounded-3" style="background:#e3f2fd;">
                        <div class="d-flex align-items-center gap-2 mb-1">
                            <i class="fas fa-headset text-primary"></i>
                            <span style="font-size:0.85rem; font-weight:600;">Need Help?</span>
                        </div>
                        <p style="font-size:0.8rem; color:#555; margin:0;">Call: <strong>+91 98765 43210</strong><br>Mon‚ÄìSat: 9 AM ‚Äì 4 PM</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
function selectFeeType(el, type, amountStr, amountNum) {
    document.querySelectorAll('.fee-type-option').forEach(e => e.classList.remove('selected'));
    el.classList.add('selected');
    document.getElementById('feeTypeInput').value = type;
    document.getElementById('amountInput').value = amountNum;
    document.getElementById('s-type').textContent = el.querySelector('.name').textContent;
    document.getElementById('s-amount').textContent = amountStr;
}

function selectPayment(id) {
    document.querySelectorAll('.payment-method-card').forEach(e => e.classList.remove('selected'));
    document.getElementById(id).classList.add('selected');
}

// Live summary update
['studentName','studentId','className','month'].forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener('input', updateSummary);
    el.addEventListener('change', updateSummary);
});

function updateSummary() {
    document.getElementById('s-name').textContent = document.getElementById('studentName').value || '‚Äì';
    document.getElementById('s-id').textContent = document.getElementById('studentId').value || '‚Äì';
    document.getElementById('s-class').textContent = document.getElementById('className').value || '‚Äì';
    const month = document.getElementById('month').value;
    document.getElementById('s-month').textContent = month || '‚Äì';
}

document.getElementById('feeForm').addEventListener('submit', function(e) {
    if (!document.getElementById('feeTypeInput').value) {
        e.preventDefault();
        alert('Please select a fee type.');
    }
});
</script>
{% endblock %}
